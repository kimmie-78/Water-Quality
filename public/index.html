<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Water Quality Dashboard</title>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>

<body x-data="waterQualityApp">

    <!-- Sidebar -->
    <aside class="sidebar">
        <h2>Water Quality Dashboard</h2>
        <p>Monitor and analyze water quality samples.</p>
        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">Samples</a></li>
            <li><a href="#">Reports</a></li>
        </ul>
    </aside>
    <!-- Main Content -->
    <main class="content">
        <h1>Water Quality Overview</h1>
        <h2>Sample Data ID: <span x-text="data.samples[data.samples.length - 1]?.id"></span></h2>
        <button @click="showHistory = true" class="show-history-button">Show History</button>
        <!-- History Popup -->
        <div x-show="showHistory" class="popup">
            <div class="popup-content">
                <h2>Sample Data</h2>
                <button @click="showHistory = false">Close</button>
                <div class="scrollable-data">
                    <template x-for="sample in data.samples" :key="sample.id">
                        <div class="sample-entry">
                            <p>ID: <span x-text="sample.id"></span></p>
                            <p>Aluminium: <span x-text="sample.aluminium"></span></p>
                            <p>Ammonia: <span x-text="sample.ammonia"></span></p>
                            <p>Arsenic: <span x-text="sample.arsenic"></span></p>
                            <p>Barium: <span x-text="sample.barium"></span></p>
                            <p>Cadmium: <span x-text="sample.cadmium"></span></p>
                            <p>Chloramine: <span x-text="sample.chloramine"></span></p>
                            <p>Chromium: <span x-text="sample.chromium"></span></p>
                            <p>Copper: <span x-text="sample.copper"></span></p>
                            <p>Fluoride: <span x-text="sample.fluoride"></span></p>
                            <p>Bacteria: <span x-text="sample.bacteria"></span></p>
                            <p>Viruses: <span x-text="sample.viruses"></span></p>
                            <p>Lead: <span x-text="sample.lead"></span></p>
                            <p>Nitrates: <span x-text="sample.nitrates"></span></p>
                            <p>Nitrites: <span x-text="sample.nitrites"></span></p>
                            <p>Mercury: <span x-text="sample.mercury"></span></p>
                            <p>Perchlorate: <span x-text="sample.perchlorate"></span></p>
                            <p>Radium: <span x-text="sample.radium"></span></p>
                            <p>Selenium: <span x-text="sample.selenium"></span></p>
                            <p>Silver: <span x-text="sample.silver"></span></p>
                            <p>Uranium: <span x-text="sample.uranium"></span></p>

                         
                            <button @click="editSample(sample)" class="edit-button">Update</button>
                            <button @click="deleteSample(sample.id)">Delete</button>
                        </div>
                    </template>
                </div>
            </div>
        </div>

        <!-- Edit Popup -->
        <div x-show="editSampleData" class="popup">
            <div class="popup-content">
                <h2>Edit Sample Data</h2>
                <button @click="editSampleData = false">Back</button>
                <div>
                    <label for="editAluminium">Aluminium:</label>
                    <input type="text" id="editAluminium" x-model="sampleToEdit.aluminium">
                    <!-- Repeat for all contaminants -->
                    <button @click="updateSample(sampleToEdit.id)">Edit</button>
                </div>
            </div>
        </div>
        <div class="flex-container">
            <canvas id="waterChart"></canvas>

            <!-- Grid for Highest and Lowest Contaminants -->
            <div x-show="data.highestLowest" class="contaminant-grid">
                <h2>Highest and Lowest Contaminants</h2>
                <div class="grid-container">
                    <div class="grid-item">
                        <strong>Highest:</strong>
                        <span x-text="data.highestLowest.highest.name"></span>
                        <span x-text="data.highestLowest.highest.value"></span>
                    </div>
                    <div class="grid-item">
                        <strong>Lowest:</strong>
                        <span x-text="data.highestLowest.lowest.name"></span>
                        <span x-text="data.highestLowest.lowest.value"></span>
                    </div>
                </div>
            </div>

        </div>
        <!-- New Container for Line Graph -->
        <div class="line-chart-container">
            <h2>Sample Data ID: <span x-text="data.samples[data.samples.length - 1]?.id"></span></h2>
            <div class="contaminant-key">
                <h3>Key:</h3>
                <div>
                    <span style="color: green;">● Safe</span>
                    <span style="color: red;">● Unsafe</span>
                </div>
            </div>
            <canvas id="lineChart" width="600" height="400"></canvas>

        </div>
    </main>



    <script src="alpine.js"></script>
</body>

</html>